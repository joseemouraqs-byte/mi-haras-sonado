<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi Haras So√±ado - v1.2 Edici√≥n Visual</title>
    <style>
        /* [SISTEMA 1 - ESTILOS BASE Y VARIABLES] */
        :root { --p-brown: #5d4037; --p-green: #2e7d32; --p-gold: #fbc02d; --p-blue: #1565c0; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0ede7; margin: 0; padding-bottom: 50px; }
        
        /* [SISTEMA 2 - UI SUPERIOR] */
        #top-bar { background: var(--p-brown); color: white; padding: 10px 20px; display: flex; justify-content: space-between; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        nav { background: #3e2723; display: flex; justify-content: center; gap: 5px; padding: 5px; }
        nav button { border: none; background: transparent; color: #a1887f; padding: 10px 15px; cursor: pointer; font-weight: bold; border-radius: 4px; }
        nav button.active { color: white; background: rgba(255,255,255,0.1); border-bottom: 3px solid var(--p-gold); }
        .container { max-width: 1100px; margin: 20px auto; padding: 0 20px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* [SISTEMA 3 - AVATARES Y CARTAS] */
        .horse-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .horse-card { background: white; border-radius: 12px; padding: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-left: 8px solid #ccc; display: flex; flex-direction: column; gap: 10px; }
        
        .horse-header { display: flex; align-items: center; gap: 15px; }
        /* AVATAR M√ÅGICO */
        .avatar { width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; border: 3px solid rgba(0,0,0,0.1); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }
        
        /* RAREZAS */
        .rarity-Com√∫n { border-left-color: #9e9e9e; }
        .rarity-Rara { border-left-color: #2196f3; }
        .rarity-√âpica { border-left-color: #9c27b0; }
        .rarity-Legendaria { border-left-color: #ff9800; }
        .rarity-M√≠tica { border-left-color: #f44336; animation: glow 1.5s infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 5px #f44336; } to { box-shadow: 0 0 15px #f44336; } }

        /* BARRAS Y BOTONES */
        .stat-bar { background: #eee; height: 8px; border-radius: 4px; overflow: hidden; margin-top: 3px; }
        .fill { height: 100%; transition: 0.3s; }
        .action-btn { background: var(--p-blue); color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-size: 0.9em; flex: 1; }
        .action-btn:disabled { background: #ccc; cursor: not-allowed; }
        .btn-group { display: flex; gap: 5px; }

        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: var(--p-brown); color: white; }
    </style>
</head>
<body>

<div id="top-bar">
    <div>
        üí∞ $<span id="m-money">2000</span> | 
        ü•ï <span id="m-carrots">5</span> | 
        üíß <span id="m-water">5</span>
    </div>
    <div>üìÖ <span id="m-date">D√≠a 1</span> | ‚è≥ <span id="m-time">08:00</span></div>
</div>

<nav>
    <button onclick="changeTab('ganaderia')" class="nav-btn active">üê¥ GANADER√çA</button>
    <button onclick="changeTab('tienda')" class="nav-btn">üõí TIENDA</button>
    <button onclick="changeTab('carreras')" class="nav-btn">üèá CARRERAS</button>
    <button onclick="changeTab('rankings')" class="nav-btn">üèÜ RANKINGS</button>
</nav>

<div class="container">
    <div style="text-align:center; margin-bottom:15px;">
        <button class="action-btn" onclick="advanceWorldTime(6)" style="background:var(--p-brown);">‚è≥ Avanzar +6h</button>
    </div>

    <div id="ganaderia" class="tab-content active">
        <button onclick="buyHorse()" class="action-btn" style="background:var(--p-green); padding:15px; font-size:1.1em; width:100%;">
            ‚ú® COMPRAR NUEVO CABALLO ($500)
        </button>
        <div id="horse-list" class="horse-grid" style="margin-top:20px"></div>
    </div>

    <div id="tienda" class="tab-content">
        <h2>Suministros del Haras</h2>
        <div id="shop-list" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:15px"></div>
    </div>

    <div id="carreras" class="tab-content">
        <h2>Hip√≥dromo Local</h2>
        <div style="background:white; padding:20px; border-radius:12px; border:2px solid var(--p-blue);">
            <h3>Derby de Prueba (Galope)</h3>
            <p>Selecciona un caballo. Coste de energ√≠a: 30%</p>
            <div id="race-horse-list" class="horse-grid"></div>
            <div id="race-results" style="margin-top:20px; font-weight:bold; color:var(--p-green);"></div>
        </div>
    </div>

    <div id="rankings" class="tab-content">
        <h2>Top 10 Nacional</h2>
        <table id="ranking-table">
            <thead><tr><th>Pos</th><th>Due√±o</th><th>Dinero</th><th>Caballos</th></tr></thead>
            <tbody>
